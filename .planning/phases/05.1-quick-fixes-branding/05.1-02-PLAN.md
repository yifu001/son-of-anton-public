---
phase: 05.1-quick-fixes-branding
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - media/logo.png
  - media/icon.ico
  - media/icon.icns
  - media/linuxIcons/16x16.png
  - media/linuxIcons/24x24.png
  - media/linuxIcons/32x32.png
  - media/linuxIcons/48x48.png
  - media/linuxIcons/64x64.png
  - media/linuxIcons/96x96.png
  - media/linuxIcons/128x128.png
  - media/linuxIcons/256x256.png
  - media/linuxIcons/512x512.png
autonomous: true
user_setup: []

must_haves:
  truths:
    - "App icon shows new sci-fi terminal design in Windows taskbar"
    - "App icon shows new design in macOS dock"
    - "Desktop shortcut displays new icon"
  artifacts:
    - path: "media/logo.png"
      provides: "Main app logo"
      min_bytes: 50000
    - path: "media/icon.ico"
      provides: "Windows multi-resolution icon"
      min_bytes: 10000
    - path: "media/icon.icns"
      provides: "macOS icon"
      min_bytes: 10000
    - path: "media/linuxIcons/256x256.png"
      provides: "Linux icon 256px"
      min_bytes: 1000
  key_links:
    - from: "package.json"
      to: "media/icon.ico"
      via: "electron-builder win.icon config"
      pattern: '"icon":\\s*"media/icon\\.ico"'
    - from: "package.json"
      to: "media/icon.icns"
      via: "electron-builder mac.icon config"
      pattern: '"icon":\\s*"media/icon\\.icns"'
---

<objective>
Update app branding with new sci-fi terminal icon across all platforms and formats.

Purpose: Refresh app identity with distinctive icon visible in taskbar, dock, and desktop.
Output: New icon files (ICO, ICNS, PNG variants) replacing existing media assets.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05.1-quick-fixes-branding/05.1-CONTEXT.md
@.planning/phases/05.1-quick-fixes-branding/05.1-RESEARCH.md
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install icon generation tools and copy source</name>
  <files>package.json, media/logo.png</files>
  <action>
Install png2icons as a dev dependency for cross-platform icon generation.

Steps:
1. Install png2icons:
   ```bash
   cd C:/Users/yzuo2/OneDrive/Desktop/yifuzuo/startup/projects/tech/son-of-anton
   npm install --save-dev png2icons
   ```

2. Verify source image exists:
   - Source: `C:\Users\yzuo2\Downloads\son of anton.png`
   - Format: 1024x1024 PNG with RGBA (956KB)

3. Copy source to media/logo.png (overwrite existing):
   ```bash
   cp "C:/Users/yzuo2/Downloads/son of anton.png" media/logo.png
   ```

4. Verify copy succeeded:
   ```bash
   ls -la media/logo.png
   ```
   Should show ~956KB file with current timestamp.
  </action>
  <verify>
Run:
```bash
npm ls png2icons
ls -la media/logo.png
```
- png2icons appears in dev dependencies
- logo.png is ~956KB with new timestamp
  </verify>
  <done>png2icons installed and source PNG copied to media/logo.png.</done>
</task>

<task type="auto">
  <name>Task 2: Generate ICO, ICNS, and Linux icons</name>
  <files>media/icon.ico, media/icon.icns, media/linuxIcons/*.png</files>
  <action>
Create a Node.js script to generate all icon formats from the source PNG.

Create `scripts/generate-icons.js`:
```javascript
const fs = require('fs');
const path = require('path');
const png2icons = require('png2icons');

const MEDIA = path.join(__dirname, '..', 'media');
const SOURCE = path.join(MEDIA, 'logo.png');

console.log('Reading source image...');
const inputBuffer = fs.readFileSync(SOURCE);

// Generate ICO (with BMP mode for Windows executables)
// BMP mode embeds smaller sizes as BMP for better Windows compatibility
console.log('Generating icon.ico...');
const icoBuffer = png2icons.createICO(inputBuffer, png2icons.BILINEAR, 0, true);
fs.writeFileSync(path.join(MEDIA, 'icon.ico'), icoBuffer);
console.log('Created icon.ico (' + icoBuffer.length + ' bytes)');

// Generate ICNS for macOS
console.log('Generating icon.icns...');
const icnsBuffer = png2icons.createICNS(inputBuffer, png2icons.BILINEAR, 0);
fs.writeFileSync(path.join(MEDIA, 'icon.icns'), icnsBuffer);
console.log('Created icon.icns (' + icnsBuffer.length + ' bytes)');

// Generate Linux icon sizes using png2icons resize
// Required sizes: 16, 24, 32, 48, 64, 96, 128, 256, 512
const LINUX_DIR = path.join(MEDIA, 'linuxIcons');
const sizes = [16, 24, 32, 48, 64, 96, 128, 256, 512];

console.log('Generating Linux icons...');
for (const size of sizes) {
    const resized = png2icons.resizeImg(inputBuffer, png2icons.BILINEAR, size);
    const outPath = path.join(LINUX_DIR, size + 'x' + size + '.png');
    fs.writeFileSync(outPath, resized);
    console.log('Created ' + size + 'x' + size + '.png');
}

console.log('\\nIcon generation complete!');
console.log('Files updated:');
console.log('  - media/icon.ico');
console.log('  - media/icon.icns');
console.log('  - media/linuxIcons/*.png');
```

Run the script:
```bash
cd C:/Users/yzuo2/OneDrive/Desktop/yifuzuo/startup/projects/tech/son-of-anton
node scripts/generate-icons.js
```

Verify output:
```bash
ls -la media/icon.ico media/icon.icns
ls -la media/linuxIcons/
```
  </action>
  <verify>
Run:
```bash
ls -la media/icon.ico media/icon.icns
ls -la media/linuxIcons/
```
Expected:
- icon.ico exists with new timestamp (should be >100KB for multi-resolution)
- icon.icns exists with new timestamp (should be >100KB)
- linuxIcons/ contains 9 PNG files (16-512px) with new timestamps
  </verify>
  <done>All icon formats generated: ICO (Windows), ICNS (macOS), PNG sizes (Linux).</done>
</task>

<task type="auto">
  <name>Task 3: Verify electron-builder config and test app launch</name>
  <files>package.json</files>
  <action>
Verify electron-builder already references correct icon paths (should already be configured).

Check package.json build section:
- `build.win.icon` should be `"media/icon.ico"`
- `build.mac.icon` should be `"media/icon.icns"`
- `build.linux.icon` should be `"media/linuxIcons"`

If any path is wrong, update it. Based on research, paths are already correct.

Test app launch to verify new icons load:
```bash
cd C:/Users/yzuo2/OneDrive/Desktop/yifuzuo/startup/projects/tech/son-of-anton
npm start
```

Observe:
1. App window title bar shows new icon (if OS renders it)
2. Taskbar shows new icon
3. About dialog (if present) shows new logo

Note: Packaged builds (electron-builder) will embed the new icons. Development mode may use default Electron icon in some contexts.
  </action>
  <verify>
1. package.json contains correct icon paths:
   - `"icon": "media/icon.ico"` under `build.win`
   - `"icon": "media/icon.icns"` under `build.mac`
   - `"icon": "media/linuxIcons"` under `build.linux`
2. App launches with `npm start`
3. New icon visible in Windows taskbar (if running on Windows)
  </verify>
  <done>Icon paths verified in electron-builder config and app launches successfully with new branding.</done>
</task>

</tasks>

<verification>
All branding updates complete:
1. `media/logo.png` is the new sci-fi terminal icon (1024x1024)
2. `media/icon.ico` contains multi-resolution Windows icon (16-256px)
3. `media/icon.icns` contains macOS icon with retina variants
4. `media/linuxIcons/` contains all 9 PNG sizes (16-512px)
5. `npm start` launches app with new icon in taskbar
6. electron-builder config references correct paths
</verification>

<success_criteria>
- New icon displays in Windows taskbar when app runs
- All icon files updated with new branding
- electron-builder config unchanged (already correct)
- No build errors when running `npm start`
- Icon script reusable for future branding updates
</success_criteria>

<output>
After completion, create `.planning/phases/05.1-quick-fixes-branding/05.1-02-SUMMARY.md`
</output>
