---
phase: 03-ui-layout-restructure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/classes/context.class.js
  - src/assets/css/mod_context.css
  - src/assets/css/mod_agentList.css
  - src/_renderer.js
  - src/ui.html
autonomous: true

must_haves:
  truths:
    - "Claude usage widget no longer visible in right sidebar"
    - "Context widget placeholder visible in top-right position"
    - "Agent list visible in right sidebar below context widget"
    - "Agent list spans full width with 5px right offset"
    - "No horizontal scrollbar or visual clipping at 1920x1080"
  artifacts:
    - path: "src/classes/context.class.js"
      provides: "Context placeholder widget class"
      contains: "class ContextWidget"
    - path: "src/assets/css/mod_context.css"
      provides: "Context widget styling matching right-column pattern"
      contains: "div#mod_context"
    - path: "src/assets/css/mod_agentList.css"
      provides: "Full width + 5px offset styling"
      contains: "translateX(5px)"
    - path: "src/_renderer.js"
      provides: "Correct widget instantiation order"
      pattern: "new ContextWidget.*mod_column_right"
    - path: "src/ui.html"
      provides: "CSS link for mod_context.css"
      contains: "mod_context.css"
  key_links:
    - from: "src/_renderer.js"
      to: "src/classes/context.class.js"
      via: "new ContextWidget()"
      pattern: "new ContextWidget\\("
    - from: "src/ui.html"
      to: "src/assets/css/mod_context.css"
      via: "link tag"
      pattern: "mod_context\\.css"
---

<objective>
Restructure right-side widget layout for Claude Code displays.

Purpose: Make room for Claude Code monitoring widgets by replacing the API usage widget with a session context placeholder and moving the agent list to the right column with enhanced visibility.

Output:
- Context widget placeholder in right column (ready for Phase 5 data binding)
- Agent list relocated from left to right column with full width + 5px offset
- Claude usage widget disabled (commented out, not deleted)
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-ui-layout-restructure/03-RESEARCH.md
@src/_renderer.js (lines 491-496 - widget instantiation)
@src/assets/css/mod_conninfo.css (right-column CSS pattern template)
@src/classes/claudeUsage.class.js (class structure template)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Context widget placeholder</name>
  <files>
    src/classes/context.class.js
    src/assets/css/mod_context.css
    src/ui.html
  </files>
  <action>
Create the Context widget placeholder class and CSS:

1. Create `src/classes/context.class.js`:
   - Follow exact class structure from claudeUsage.class.js
   - Constructor takes `parentId`, injects HTML into parent
   - HTML structure:
     ```html
     <div id="mod_context">
       <div id="mod_context_innercontainer">
         <h1>CONTEXT<i class="mod_context_headerInfo">SESSION 0</i></h1>
         <div id="mod_context_content">
           <div class="context-placeholder">
             <span class="context-placeholder-text">-- / --</span>
           </div>
         </div>
       </div>
     </div>
     ```
   - Store reference to content element for future data binding (Phase 5)
   - NO init() method needed - this is a placeholder only

2. Create `src/assets/css/mod_context.css`:
   - Copy EXACT pattern from mod_conninfo.css for outer container:
     - border-top with theme color
     - ::before/::after corner accents
     - flex display
   - Style inner container similar to conninfo
   - Style h1 with theme font, size 1.48vh
   - Style placeholder text centered, muted (opacity 0.5)

3. Update `src/ui.html`:
   - Add CSS link after mod_agentList.css (line 39):
     `<link rel="stylesheet" href="assets/css/mod_context.css" />`
   - Add script tag after agentList.class.js (line 65):
     `<script src="classes/context.class.js"></script>`
  </action>
  <verify>
    - `test -f src/classes/context.class.js && echo "Class file exists"`
    - `test -f src/assets/css/mod_context.css && echo "CSS file exists"`
    - `grep -q "mod_context.css" src/ui.html && echo "CSS linked"`
    - `grep -q "context.class.js" src/ui.html && echo "Class linked"`
  </verify>
  <done>
    - context.class.js exists with ContextWidget class
    - mod_context.css exists with right-column styling pattern
    - ui.html links both files
  </done>
</task>

<task type="auto">
  <name>Task 2: Update widget instantiation and AgentList styling</name>
  <files>
    src/_renderer.js
    src/assets/css/mod_agentList.css
  </files>
  <action>
Modify widget instantiation order and AgentList CSS:

1. Update `src/_renderer.js` in `initUI()` function (around lines 491-496):

   CURRENT CODE:
   ```javascript
   // Right column
   window.mods.netstat = new Netstat("mod_column_right");
   window.mods.globe = new LocationGlobe("mod_column_right");
   window.mods.conninfo = new Conninfo("mod_column_right");
   window.mods.agentList = new AgentList("mod_column_left");
   window.mods.claudeUsage = new ClaudeUsage("mod_column_right");
   ```

   REPLACE WITH:
   ```javascript
   // Right column
   window.mods.netstat = new Netstat("mod_column_right");
   window.mods.globe = new LocationGlobe("mod_column_right");
   window.mods.conninfo = new Conninfo("mod_column_right");
   window.mods.context = new ContextWidget("mod_column_right");  // NEW - replaces ClaudeUsage
   window.mods.agentList = new AgentList("mod_column_right");    // MOVED from mod_column_left
   // window.mods.claudeUsage = new ClaudeUsage("mod_column_right");  // Disabled - replaced by Context
   ```

   Key changes:
   - Add ContextWidget instantiation AFTER conninfo, BEFORE agentList
   - Change AgentList parentId from "mod_column_left" to "mod_column_right"
   - Comment out ClaudeUsage instantiation (preserve code for reference)

2. Update `src/assets/css/mod_agentList.css`:

   CURRENT first rule:
   ```css
   #mod_agentList {
       display: flex;
       flex-direction: column;
       padding: 10px;
       margin-left: 20px;
       transform: scale(0.9);
       transform-origin: left center;
       height: 100%;
       width: 90%;
   }
   ```

   REPLACE WITH:
   ```css
   #mod_agentList {
       display: flex;
       flex-direction: column;
       padding: 10px;
       margin-left: 0;
       margin-right: 0;
       transform: translateX(5px);  /* 5px right shift without affecting layout */
       transform-origin: left center;
       height: 100%;
       width: 100%;  /* Full width */
   }
   ```

   Changes:
   - Remove margin-left: 20px, set margin-left: 0
   - Add margin-right: 0
   - Change transform from scale(0.9) to translateX(5px)
   - Change width from 90% to 100%
  </action>
  <verify>
    - `grep -q "new ContextWidget" src/_renderer.js && echo "ContextWidget instantiated"`
    - `grep -q '"mod_column_right".*AgentList\|AgentList.*"mod_column_right"' src/_renderer.js || grep "agentList = new AgentList(\"mod_column_right\")" src/_renderer.js && echo "AgentList in right column"`
    - `grep -q "// window.mods.claudeUsage" src/_renderer.js && echo "ClaudeUsage commented out"`
    - `grep -q "translateX(5px)" src/assets/css/mod_agentList.css && echo "5px offset applied"`
    - `grep -q "width: 100%" src/assets/css/mod_agentList.css && echo "Full width applied"`
  </verify>
  <done>
    - _renderer.js instantiates ContextWidget into mod_column_right
    - _renderer.js instantiates AgentList into mod_column_right (not left)
    - _renderer.js has ClaudeUsage instantiation commented out
    - mod_agentList.css has width: 100% and transform: translateX(5px)
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. **Build check:**
   ```bash
   cd src && npm run build 2>&1 | head -20
   ```
   (Or if no build step, just syntax check JS files)

2. **Visual verification at runtime:**
   - Launch app: `npm start`
   - Right column shows (top to bottom): Netstat, Globe, Conninfo, Context placeholder, AgentList
   - Left column does NOT show AgentList
   - Context widget displays "-- / --" placeholder text
   - AgentList visually extends slightly beyond right edge (5px offset)
   - No horizontal scrollbar at 1920x1080

3. **DOM inspection:**
   - Open DevTools (Ctrl+Shift+I)
   - Verify `#mod_context` exists inside `#mod_column_right`
   - Verify `#mod_agentList` exists inside `#mod_column_right`
   - Verify NO `#mod_claudeUsage` element exists
</verification>

<success_criteria>
1. Claude usage widget removed from right sidebar (no #mod_claudeUsage in DOM)
2. Context widget placeholder visible at top-right position showing "-- / --"
3. Agent list visible in right column (not left column)
4. Agent list spans full width of container with 5px right offset visible
5. No visual clipping or horizontal overflow at 1920x1080 minimum resolution
</success_criteria>

<output>
After completion, create `.planning/phases/03-ui-layout-restructure/03-01-SUMMARY.md`
</output>
